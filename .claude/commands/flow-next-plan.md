# Flow: Generate Implementation Plan

## Prerequisites
- `docs/interview-answers.md` must exist (generated by interview step)

## Instructions

Read `docs/interview-answers.md` and `CLAUDE.md` carefully.

Generate a detailed, step-by-step implementation plan that Ralph (the autonomous executor) can follow without any human input.

### Plan Structure

Create `plan.md` in the project root with this format:

```markdown
# Implementation Plan: [Project Name]

## Summary
[One paragraph describing what we're building]

## Technical Stack
[Language, framework, key libraries, architecture]

## Phases

### Phase 1: Project Setup
- [ ] Step 1.1: [specific task with file paths]
- [ ] Step 1.2: ...

### Phase 2: Core Data Model
- [ ] Step 2.1: ...

### Phase 3: Core Logic
- [ ] Step 3.1: ...

### Phase 4: [Feature Area]
- [ ] Step 4.1: ...

### Phase 5: Integration & Polish
- [ ] Step 5.1: ...
- [ ] Step N: Final validation and cleanup
```

### Step Writing Rules

Each step must be:
- **Atomic** — completable in a single Claude execution (roughly one file or one logical change)
- **Specific** — include exact file paths to create/modify
- **Self-contained** — include enough context that Ralph can execute it without referring back to the interview
- **Ordered** — dependencies resolved (don't reference files that haven't been created yet)
- **Testable** — include what "done" looks like

Good step: `Create src/models/user.py with User dataclass containing id, email, name, created_at fields and validation`
Bad step: `Set up the models`

### Machine-Readable Steps

Also generate `scripts/ralph/steps.json`:

```json
[
  {
    "id": 1,
    "phase": "setup",
    "task": "Initialize project with package.json including express, typescript, and vitest",
    "files": ["package.json", "tsconfig.json"],
    "done": false
  }
]
```

### Guidelines

- Aim for 10-25 steps total (enough detail without being excessive)
- Phase 1 should always be project scaffolding (package.json, directory structure, config files)
- Last phase should include a validation/smoke-test step
- Include dependency installation steps where needed
- If the project needs a build step, include it

### Output

After generating both files, tell the user:

> "Plan generated with [N] steps across [M] phases. Here's the summary:
> [brief overview]
>
> Review `plan.md` if you want to see the details. When you're ready to execute, say **go ahead** or **/flow-next-init-ralph**."
